<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>sons disparus</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 90vh; width: 100%; }
        .filters { margin: 10px; }
        .filters button { margin-right: 5px; }
    </style>
</head>
<body>

<div class="filters">
    <button onclick="filterMarkers('Tous')">Tous</button>
    <button onclick="filterMarkers('Bidonville')">Bidonville</button>
    <button onclick="filterMarkers('HLM')">HLM</button>
    <button onclick="filterMarkers('Usine')">Usine</button>
    <button onclick="filterMarkers('Commerce')">Commerce</button>
    <button onclick="filterMarkers('Circulation')">Circulation</button>
    <button onclick="filterMarkers('Friche')">Friche</button>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
// Ton GeoJSON ici
const geojsonData = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [2.23, 48.91] },
      "properties": {
        "title": "Bidonville de Nanterre",
        "typologie": "Bidonville",
        "periode": "1950-1970",
        "cause": "Urbanisme hygiéniste",
        "etat": "Logements sociaux",
        "audio": "audio/Bidonville Nanterre.m4a",
        "text": "Ancien bidonville habité principalement par des Algériens."
      }
    },
    {
    "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [2.51, 48.82] },
      "properties": {
        "title": "Bidonville de Champigny-sur-Marne",
        "typologie": "Bidonville",
        "periode": "1960-1975",
        "cause": "Hygiène et intégration urbaine",
        "etat": "Quartier pavillonnaire",
        "audio": "audio/Bidonville Champigny-sur-Marne.m4a",
        "text": "Le bidonville de Champigny-sur-Marne, qui a atteint jusqu'à 15 000 habitants dans les années 1960, était le plus grand de France, principalement habité par des immigrés portugais fuyant la misère et la dictature.Detruit dans le cadre d'une politique de résorption de l'habitat insalubre."
      }
    },
    {
      "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [2.2321323, 48.8245002] },
      "properties": {
        "title": "Usines Renault",
        "typologie": "Usine",
        "periode": "1930-1992",
        "cause": "Désindustrialisation",
        "etat": "Quartier d’affaires",
        "audio": "audio/Usines Renault.m4a",
        "text": "L'usine Renault de Billancourt a été un symbole de l’implantation du communisme en milieu ouvrier. Elle est le théâtre de nombreux événements importants dans l'histoire sociale et politique de la France, notamment les grèves de 1936 et de Mai 1968. Fermé en raison de la réduction de la production automobile en France"
      }
    },
    {
      "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [2.4203814,48.9214408] },
      "properties": {
        "title": "Cité Gagarine",
        "typologie": "HLM",
        "periode": "1963–2020",
        "cause": "rénovation urbaine",
        "etat": "ecoquartier",
        "audio": "audio/gagarine.m4a",
        "text": "Une cité résidentielle d'HLM située à Ivry-sur-Seine de 380 logements. Démolie et remplacée par le projet de nouveau quartier Gagarine-Truillot."
      }
    },
{
      "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [2.352411,48.860653] },
      "properties": {
        "title": "Îlot insalubres n1 - Centre Pompidou",
        "typologie": "bidonville",
        "periode": "XIX-1930",
        "cause": "rénovation urbaine",
        "etat": "centre culturel",
        "audio": "beaubourg.m4a",
        "text": "Au XIXe siècle, le quartier de Beaubourg est très peuplé. Les habitants y vivent entassés dans des logements misérables. En 1930 l'ilot est démolie. Il reste un terrain vague pendant plus de 30ans . En 1971, un concours est lancé pour y construire un centre culturel et artistique."
      }
  ]
};

const map = L.map('map').setView([48.8566, 2.3522], 11); // Paris centre
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

let markers = [];

function displayMarkers(filter) {
  // Supprimer anciens marqueurs
  markers.forEach(marker => map.removeLayer(marker));
  markers = [];

  geojsonData.features.forEach(feature => {
    if (filter === "Tous" || feature.properties.typologie === filter) {
      const coords = feature.geometry.coordinates;
      const props = feature.properties;
      const marker = L.marker([coords[1], coords[0]])
        .bindPopup(`<strong>${props.title}</strong><br>${props.text}<br><em>Typologie : ${props.typologie}</em>`);
      marker.addTo(map);
      markers.push(marker);
    }
  });
}

function filterMarkers(type) {
  displayMarkers(type);
}

// Affiche tout au départ
displayMarkers('Tous');

</script>

</body>
</html>


  <!-- Titre en bas -->
  <div id="page-title">sons disparus</div>

  <div id="page-title">sons disparus</div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

  <!-- Script principal -->
  <script src="script.js"></script>

</body>
</html>
